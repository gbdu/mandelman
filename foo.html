<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>~/code/SDL/mandel/complex.c.html</title>
<meta name="Generator" content="Vim/7.2">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>
<body bgcolor="#000000" text="#87afd7"><font face="monospace">
<span style="background-color: #000000"><font color="#87d787">&nbsp;1 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&lt;stdlib.h&gt;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;2 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&lt;math.h&gt;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;3 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&lt;stdarg.h&gt;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;4 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&lt;stdbool.h&gt;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;5 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&quot;complex.h&quot;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;6 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;7 </font></span><font color="#0087d7">#include </font><font color="#87d7d7">&lt;stdio.h&gt;</font><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;8 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">&nbsp;9 </font></span>Z z_multiply_two(Z one, Z two){<br>
<span style="background-color: #000000"><font color="#87d787">10 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#875f5f">// (a + ib)( c + id ) = (ac âˆ’ bd ) + i (ad + bc).</font><br>
<span style="background-color: #000000"><font color="#87d787">11 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z prod = {one.a*two.a - one.b*two.b, one.a*two.b + one.b*two.a};<br>
<span style="background-color: #000000"><font color="#87d787">12 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">return</font>&nbsp;prod;<br>
<span style="background-color: #000000"><font color="#87d787">13 </font></span>}<br>
<span style="background-color: #000000"><font color="#87d787">14 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">15 </font></span>Z z_multiply(<font color="#0087d7">unsigned</font>&nbsp;<font color="#0087d7">int</font>&nbsp;items, ...){<br>
<span style="background-color: #000000"><font color="#87d787">16 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0087d7">va_list</font>&nbsp;arglist;<br>
<span style="background-color: #000000"><font color="#87d787">17 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va_start(arglist, items);<br>
<span style="background-color: #000000"><font color="#87d787">18 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span style="background-color: #000000"><font color="#87d787">19 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z product = {<font color="#00d7d7">1</font>, <font color="#00d7d7">0</font>};<br>
<span style="background-color: #000000"><font color="#87d787">20 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z current ;<br>
<span style="background-color: #000000"><font color="#87d787">21 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span style="background-color: #000000"><font color="#87d787">22 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">while</font>(items--) {<br>
<span style="background-color: #000000"><font color="#87d787">23 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;current = va_arg(arglist, Z);<br>
<span style="background-color: #000000"><font color="#87d787">24 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;product = z_multiply_two(product, current);<br>
<span style="background-color: #000000"><font color="#87d787">25 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span style="background-color: #000000"><font color="#87d787">26 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span style="background-color: #000000"><font color="#87d787">27 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;va_end(arglist);<br>
<span style="background-color: #000000"><font color="#87d787">28 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">return</font>&nbsp;product;<br>
<span style="background-color: #000000"><font color="#87d787">29 </font></span>}<br>
<span style="background-color: #000000"><font color="#87d787">30 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">31 </font></span>Z z_add_two(Z one, Z two){<br>
<span style="background-color: #000000"><font color="#87d787">32 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z sum = {one.a+two.a, one.b+two.b};<br>
<span style="background-color: #000000"><font color="#87d787">33 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">return</font>&nbsp;sum;<br>
<span style="background-color: #000000"><font color="#87d787">34 </font></span>}<br>
<span style="background-color: #000000"><font color="#87d787">35 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">36 </font></span><font color="#875f5f">// z = zn-1 ^2 + c</font><br>
<span style="background-color: #000000"><font color="#87d787">37 </font></span><font color="#0087d7">int</font>&nbsp;Mb_GetN(Z c, <font color="#0087d7">int</font>&nbsp;max_iter){ <font color="#875f5f">// returns -1 if not in set </font><br>
<span style="background-color: #000000"><font color="#87d787">38 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z zn = {<font color="#00d7d7">0</font>, <font color="#00d7d7">0</font>};<br>
<span style="background-color: #000000"><font color="#87d787">39 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Z znMinusOne = {<font color="#00d7d7">0</font>, <font color="#00d7d7">0</font>};<br>
<span style="background-color: #000000"><font color="#87d787">40 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#0087d7">int</font>&nbsp;n = <font color="#00d7d7">0</font>;<br>
<span style="background-color: #000000"><font color="#87d787">41 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">for</font>(; n &lt; max_iter; n++){<br>
<span style="background-color: #000000"><font color="#87d787">42 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zn = z_multiply_two(znMinusOne, znMinusOne) ;<br>
<span style="background-color: #000000"><font color="#87d787">43 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zn = z_add_two(zn, c);<br>
<span style="background-color: #000000"><font color="#87d787">44 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span style="background-color: #000000"><font color="#87d787">45 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">if</font>(ZMAG(zn) &gt; <font color="#00d7d7">2.0</font>&nbsp;) {<br>
<span style="background-color: #000000"><font color="#87d787">46 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#875f5f">// c is not on the mandelbrot set</font><br>
<span style="background-color: #000000"><font color="#87d787">47 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">return</font>&nbsp;n;<br>
<span style="background-color: #000000"><font color="#87d787">48 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span style="background-color: #000000"><font color="#87d787">49 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>
<span style="background-color: #000000"><font color="#87d787">50 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;znMinusOne = zn;<br>
<span style="background-color: #000000"><font color="#87d787">51 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<span style="background-color: #000000"><font color="#87d787">52 </font></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color="#00d75f">return</font>&nbsp;-<font color="#00d7d7">1</font>;<br>
<span style="background-color: #000000"><font color="#87d787">53 </font></span>}<br>
<span style="background-color: #000000"><font color="#87d787">54 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">55 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">56 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">57 </font></span><br>
<span style="background-color: #000000"><font color="#87d787">58 </font></span><br>
</font></body>
</html>
